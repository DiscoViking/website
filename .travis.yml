language: go

env:
  NODE_VERSION="8.11.2"

go:
  - 1.11
  - 1.12
  - master

cache:
  yarn: true
  directories:
    - app/node_modules

before_install:
  - nvm install $NODE_VERSION
  - npm install -g yarn

install:
  - cd app && yarn
  - cd ../server && go get

script:
  - cd ../app && yarn dist
  - cd ../server && go build
  - cd ../server && go test -v ./...
  - cd ../server && go vet ./...
  - cd ../app && yarn lint
